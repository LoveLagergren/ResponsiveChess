<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R35P0N51V3 CH355</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <h1>R35P0N51V3 CH355</h1>

    <section id="squares">

    </section>

    <button onclick="restart()">Restart</button>


</body>
<script>
    const squares = document.querySelector('#squares')

    console.log(squares)



    let i = 1
    let col_id = 0
    let row_id = 0
    let white = false
    let selectedPiece = null
    const onClick = (e) => {

        console.log(selectedPiece)
        if (selectedPiece) {
            const k = e.target.id
            const piece = document.getElementById(selectedPiece).innerText
            document.getElementById(selectedPiece).innerText = ''
            document.getElementById(k).innerText = piece
            selectedPiece = null
        }
        else {
            selectedPiece = e.target.id

        }
    }
    while (i <= 32) {
        const whiteBox = document.createElement('div')
        const blackBox = document.createElement('div')
        whiteBox.classList.add('box')
        whiteBox.addEventListener('click', onClick)

        blackBox.addEventListener('click', onClick)
        blackBox.classList.add('box', 'black')

        if (white === false) {
            whiteBox.setAttribute('id', `c${col_id}${row_id}`)
            col_id += 1
            blackBox.setAttribute('id', `c${col_id}${row_id}`)
            col_id += 1

            squares.append(
                whiteBox,
                blackBox
            )
        } else {
            blackBox.setAttribute('id', `c${col_id}${row_id}`)
            col_id += 1
            whiteBox.setAttribute('id', `c${col_id}${row_id}`)
            col_id += 1

            squares.append(blackBox, whiteBox)
        }

        if (i % 4 == 0) {
            white = !white
        }
        if (col_id % 8 == 0) {
            row_id += 1
            col_id = 0
        }

        i += 1
    }
    let p = [
        ["white_rook1", "white_knight1", "white_bishop1", "white_king", "white_queen", "white_bishop2", "white_knight2", "white_rook2"],
        ["white_pawn1", "white_pawn2", "white_pawn3", "white_pawn4", "white_pawn5", "white_pawn6", "white_pawn7", "white_pawn8"],
        [null, null, null, null, null, null, null, null],
        [null, null, null, null, null, null, null, null],
        [null, null, null, null, null, null, null, null],
        [null, null, null, null, null, null, null, null],
        ["black_pawn1", "black_pawn2", "black_pawn3", "black_pawn4", "black_pawn5", "black_pawn6", "black_pawn7", "black_pawn8"],
        ["black_rook1", "black_knight1", "black_bishop1", "black_queen", "black_king", "black_bishop2", "black_knight2", "black_rook2"],
    ]
    const restart = () => {
        let row_id = 0
        for (const row of p) {
            let col_id = 0
            for (const piece of row) {
                const square = document.querySelector('.box#' + `c${col_id}${row_id}`)
                if (!piece) {
                    console.log(piece)
                    square.innerHTML = ''
                } else {

                    square.innerText = piece
                }
                
                
                col_id += 1
            }
            row_id += 1
        }

    }
    restart()

</script>

</html>